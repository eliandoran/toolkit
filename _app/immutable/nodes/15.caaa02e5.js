import{s as O,B as N}from"../chunks/scheduler.9e408aab.js";import{S as I,i as U,b as A,d as S,m as P,a as C,t as T,e as j}from"../chunks/index.97a8dc8b.js";import{S as H}from"../chunks/symmetric-input-output.ad818393.js";import{T as J}from"../chunks/tool.cfc1dc5e.js";const b={};var W=globalThis&&globalThis.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(f){o={error:f}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},q={N:"null",i:"int",d:"float",b:"boolean",s:"string",a:"array-object",C:"serializable-class",O:"notserializable-class"},F=function(){function e(t,r,n){this.contents=t,this.index=r,this.options=n}return e.prototype.error=function(t){return t===void 0&&(t="Syntax Error"),new Error(t+" at index "+this.index+" while unserializing payload")},e.prototype.advance=function(t){this.index+=t},e.prototype.readAhead=function(t){var r=this.peekAhead(t);return this.index+=t,r},e.prototype.readUntil=function(t){var r=this.contents.indexOf(t,this.index);if(r===-1)throw this.error("Expected '"+t+"'");return this.readAhead(r-this.index)},e.prototype.peekAhead=function(t){return this.contents.toString(this.options.encoding,this.index,this.index+t)},e.prototype.seekExpected=function(t){var r=this.readAhead(t.length);if(r!==t)throw this.index-=t.length,this.error("Expected '"+t+"'")},e.prototype.getType=function(){var t=W(this.readAhead(2),2),r=t[0],n=t[1],i=q[r];if(!i)throw this.error("Unknown type");if(i==="null"?n!==";":n!==":")throw this.error();return i},e.prototype.getLength=function(){var t=parseInt(this.readUntil(":"),10);if(Number.isNaN(t))throw this.error();return t},e.prototype.getByLength=function(t,r,n){var i=this.getLength();this.seekExpected(":"+t);var a=n(i);return this.seekExpected(r),a},e}(),B=function(){function e(t){this.__PHP_Incomplete_Class_Name=t}return e}();function w(e,t){return typeof Buffer<"u"?Buffer.byteLength(e,t.encoding):encodeURIComponent(e).replace(/%[A-F\d]{2}/g,"U").length}function E(e){return typeof e=="number"&&parseInt(e.toString(),10)===e}function M(e){return new B(e)}function R(e){function t(){}return t.prototype=e,t}var v=globalThis&&globalThis.__assign||function(){return v=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},v.apply(this,arguments)};function x(e,t,r){var n,i=t[e];return b(i||!r,"Class "+e+" not found in given scope"),i?n=new(R(i.prototype)):n=M(e),n}function k(e,t,r,n){for(var i=[],a=0;a<t;a+=1){var o=m(e,r,n);e.seekExpected(";");var f=m(e,r,n);e.peekAhead(1)===";"&&e.advance(1),i.push({key:o,value:f})}return i}function m(e,t,r){var n=e.getType();if(n==="null")return null;if(n==="int"||n==="float"){var i=e.readUntil(";");return n==="int"?parseInt(i,10):parseFloat(i)}if(n==="boolean"){var i=e.readAhead(1);return i==="1"}if(n==="string")return e.getByLength('"','"',function(l){return e.readAhead(l)});if(n==="array-object"){var a=e.getByLength("{","}",function(l){return k(e,l,t,r)}),o=a.every(function(l,u){return E(l.key)&&u===l.key}),f=o?[]:{};return a.forEach(function(l){var u=l.key,c=l.value;f[u]=c}),f}if(n==="notserializable-class"){var s=e.getByLength('"','"',function(u){return e.readAhead(u)});e.seekExpected(":");var a=e.getByLength("{","}",function(u){return k(e,u,t,r)}),d=x(s,t,r.strict),g="\0"+s+"\0",$="\0*\0";return a.forEach(function(u){var c=u.key,p=u.value;c.startsWith(g)?d[c.slice(g.length)]=p:c.startsWith($)?d[c.slice($.length)]=p:d[c]=p}),d}if(n==="serializable-class"){var s=e.getByLength('"','"',function(u){return e.readAhead(u)});e.seekExpected(":");var L=e.getByLength("{","}",function(u){return e.readAhead(u)}),y=x(s,t,r.strict);return y instanceof B||(b(y.unserialize,"unserialize not found on class when processing '"+s+"'"),y.unserialize(L)),y}throw new Error("Invalid type '"+n+"' encounterd while unserializing")}function Y(e,t,r){t===void 0&&(t={}),r===void 0&&(r={});var n=v({},r);typeof n.strict>"u"&&(n.strict=!0),typeof n.encoding>"u"&&(n.encoding="utf8");var i=new F(Buffer.from(e),0,n);return m(i,t,n)}var _=globalThis&&globalThis.__assign||function(){return _=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},_.apply(this,arguments)},G=globalThis&&globalThis.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(f){o={error:f}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a};function K(e,t){return Object.keys(t).find(function(r){return e instanceof t[r]})||e.__PHP_Incomplete_Class_Name||e.constructor.name}function z(e,t){var r=Array.isArray(e)?e.map(function(i,a){return""+h(a,t)+h(i,t)}):Object.keys(e).map(function(i){return""+h(i,t)+h(e[i],t)}),n=r.filter(function(i){return typeof i<"u"}).length;return n+":{"+r.join("")+"}"}function h(e,t,r){t===void 0&&(t={}),r===void 0&&(r={});var n=typeof e,i=_({},r);if(typeof i.encoding>"u"&&(i.encoding="utf8"),e===null)return"N;";if(n==="number")return E(e)?"i:"+e+";":"d:"+e.toString().toUpperCase()+";";if(n==="string")return"s:"+w(e,i)+':"'+e+'";';if(n==="boolean")return"b:"+(e?"1":"0")+";";if(n!=="object")throw new TypeError("Unexpected type '"+n+"' encountered while attempting to serialize");if(Array.isArray(e)||e.constructor.name==="Object")return"a:"+z(e,t);if(e instanceof Map)return"a:"+e.size+":{"+Array.from(e.entries()).map(function(f){var s=G(f,2),d=s[0],g=s[1];return""+h(d,t)+h(g,t)}).join("")+"}";var a=K(e,t);if(typeof e.serialize=="function"){var o=e.serialize();return b(typeof o=="string",e.constructor.name+".serialize should return a string"),"C:"+a.length+':"'+a+'":'+w(o,i)+":{"+o+"}"}return"O:"+a.length+':"'+a+'":'+z(e,t)}function Q(e){let t,r;return t=new H({props:{fromTitle:"JSON",toTitle:"PHP Serialized Format",to:e[0],from:e[1]}}),{c(){A(t.$$.fragment)},l(n){S(t.$$.fragment,n)},m(n,i){P(t,n,i),r=!0},p:N,i(n){r||(C(t.$$.fragment,n),r=!0)},o(n){T(t.$$.fragment,n),r=!1},d(n){j(t,n)}}}function Z(e){let t,r;return t=new J({props:{$$slots:{default:[Q]},$$scope:{ctx:e}}}),{c(){A(t.$$.fragment)},l(n){S(t.$$.fragment,n)},m(n,i){P(t,n,i),r=!0},p(n,[i]){const a={};i&4&&(a.$$scope={dirty:i,ctx:n}),t.$set(a)},i(n){r||(C(t.$$.fragment,n),r=!0)},o(n){T(t.$$.fragment,n),r=!1},d(n){j(t,n)}}}function D(e){function t(n){return h(JSON.parse(n))}function r(n){return JSON.stringify(Y(n))}return[t,r]}class ne extends I{constructor(t){super(),U(this,t,D,Z,O,{})}}export{ne as component};
