import{s as N,n as I}from"../chunks/scheduler.CHvuV7cD.js";import{S as U,i as T,c as A,a as S,m as j,t as C,b as P,d as L}from"../chunks/index.C8TgE8xT.js";import{j as H}from"../chunks/index.C67yXtFk.js";import{S as J}from"../chunks/symmetric-input-output.HwnrbjAT.js";import{T as W}from"../chunks/tool.kp9hnVJB.js";const b={};var M=function(e,n){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var r=t.call(e),i,o=[],a;try{for(;(n===void 0||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(f){a={error:f}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},q={N:"null",i:"int",d:"float",b:"boolean",s:"string",a:"array-object",C:"serializable-class",O:"notserializable-class"},F=function(){function e(n,t,r){this.contents=n,this.index=t,this.options=r}return e.prototype.error=function(n){return n===void 0&&(n="Syntax Error"),new Error(n+" at index "+this.index+" while unserializing payload")},e.prototype.advance=function(n){this.index+=n},e.prototype.readAhead=function(n){var t=this.peekAhead(n);return this.index+=n,t},e.prototype.readUntil=function(n){var t=this.contents.indexOf(n,this.index);if(t===-1)throw this.error("Expected '"+n+"'");return this.readAhead(t-this.index)},e.prototype.peekAhead=function(n){return this.contents.toString(this.options.encoding,this.index,this.index+n)},e.prototype.seekExpected=function(n){var t=this.readAhead(n.length);if(t!==n)throw this.index-=n.length,this.error("Expected '"+n+"'")},e.prototype.getType=function(){var n=M(this.readAhead(2),2),t=n[0],r=n[1],i=q[t];if(!i)throw this.error("Unknown type");if(i==="null"?r!==";":r!==":")throw this.error();return i},e.prototype.getLength=function(){var n=parseInt(this.readUntil(":"),10);if(Number.isNaN(n))throw this.error();return n},e.prototype.getByLength=function(n,t,r){var i=this.getLength();this.seekExpected(":"+n);var o=r(i);return this.seekExpected(t),o},e}(),B=function(){function e(n){this.__PHP_Incomplete_Class_Name=n}return e}();function $(e,n){return typeof Buffer<"u"?Buffer.byteLength(e,n.encoding):encodeURIComponent(e).replace(/%[A-F\d]{2}/g,"U").length}function E(e){return typeof e=="number"&&parseInt(e.toString(),10)===e}function R(e){return new B(e)}function Y(e){function n(){}return n.prototype=e,n}var v=function(){return v=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},v.apply(this,arguments)};function x(e,n,t){var r,i=n[e];return b(i||!t,"Class "+e+" not found in given scope"),i?r=new(Y(i.prototype)):r=R(e),r}function k(e,n,t,r){for(var i=[],o=0;o<n;o+=1){var a=m(e,t,r);e.seekExpected(";");var f=m(e,t,r);e.peekAhead(1)===";"&&e.advance(1),i.push({key:a,value:f})}return i}function m(e,n,t){var r=e.getType();if(r==="null")return null;if(r==="int"||r==="float"){var i=e.readUntil(";");return r==="int"?parseInt(i,10):parseFloat(i)}if(r==="boolean"){var i=e.readAhead(1);return i==="1"}if(r==="string")return e.getByLength('"','"',function(s){return e.readAhead(s)});if(r==="array-object"){var o=e.getByLength("{","}",function(s){return k(e,s,n,t)}),a=o.every(function(s,u){return E(s.key)&&u===s.key}),f=a?[]:{};return o.forEach(function(s){var u=s.key,l=s.value;f[u]=l}),f}if(r==="notserializable-class"){var c=e.getByLength('"','"',function(u){return e.readAhead(u)});e.seekExpected(":");var o=e.getByLength("{","}",function(u){return k(e,u,n,t)}),h=x(c,n,t.strict),y="\0"+c+"\0",w="\0*\0";return o.forEach(function(u){var l=u.key,p=u.value;l.startsWith(y)?h[l.slice(y.length)]=p:l.startsWith(w)?h[l.slice(w.length)]=p:h[l]=p}),h}if(r==="serializable-class"){var c=e.getByLength('"','"',function(u){return e.readAhead(u)});e.seekExpected(":");var O=e.getByLength("{","}",function(u){return e.readAhead(u)}),g=x(c,n,t.strict);return g instanceof B||(b(g.unserialize,"unserialize not found on class when processing '"+c+"'"),g.unserialize(O)),g}throw new Error("Invalid type '"+r+"' encounterd while unserializing")}function G(e,n,t){n===void 0&&(n={}),t===void 0&&(t={});var r=v({},t);typeof r.strict>"u"&&(r.strict=!0),typeof r.encoding>"u"&&(r.encoding="utf8");var i=new F(Buffer.from(e),0,r);return m(i,n,r)}var _=function(){return _=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_.apply(this,arguments)},K=function(e,n){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var r=t.call(e),i,o=[],a;try{for(;(n===void 0||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(f){a={error:f}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o};function Q(e,n){return Object.keys(n).find(function(t){return e instanceof n[t]})||e.__PHP_Incomplete_Class_Name||e.constructor.name}function z(e,n){var t=Array.isArray(e)?e.map(function(i,o){return""+d(o,n)+d(i,n)}):Object.keys(e).map(function(i){return""+d(i,n)+d(e[i],n)}),r=t.filter(function(i){return typeof i<"u"}).length;return r+":{"+t.join("")+"}"}function d(e,n,t){n===void 0&&(n={}),t===void 0&&(t={});var r=typeof e,i=_({},t);if(typeof i.encoding>"u"&&(i.encoding="utf8"),e===null)return"N;";if(r==="number")return E(e)?"i:"+e+";":"d:"+e.toString().toUpperCase()+";";if(r==="string")return"s:"+$(e,i)+':"'+e+'";';if(r==="boolean")return"b:"+(e?"1":"0")+";";if(r!=="object")throw new TypeError("Unexpected type '"+r+"' encountered while attempting to serialize");if(Array.isArray(e)||e.constructor.name==="Object")return"a:"+z(e,n);if(e instanceof Map)return"a:"+e.size+":{"+Array.from(e.entries()).map(function(f){var c=K(f,2),h=c[0],y=c[1];return""+d(h,n)+d(y,n)}).join("")+"}";var o=Q(e,n);if(typeof e.serialize=="function"){var a=e.serialize();return b(typeof a=="string",e.constructor.name+".serialize should return a string"),"C:"+o.length+':"'+o+'":'+$(a,i)+":{"+a+"}"}return"O:"+o.length+':"'+o+'":'+z(e,n)}function Z(e){let n,t;return n=new J({props:{fromTitle:"JSON",toTitle:"PHP Serialized Format",useCodeMirror:!0,wordWrap:!0,leftLang:H(),to:e[0],from:e[1]}}),{c(){A(n.$$.fragment)},l(r){S(n.$$.fragment,r)},m(r,i){j(n,r,i),t=!0},p:I,i(r){t||(C(n.$$.fragment,r),t=!0)},o(r){P(n.$$.fragment,r),t=!1},d(r){L(n,r)}}}function D(e){let n,t;return n=new W({props:{$$slots:{default:[Z]},$$scope:{ctx:e}}}),{c(){A(n.$$.fragment)},l(r){S(n.$$.fragment,r)},m(r,i){j(n,r,i),t=!0},p(r,[i]){const o={};i&4&&(o.$$scope={dirty:i,ctx:r}),n.$set(o)},i(r){t||(C(n.$$.fragment,r),t=!0)},o(r){P(n.$$.fragment,r),t=!1},d(r){L(n,r)}}}function V(e){function n(r){return d(JSON.parse(r))}function t(r){return JSON.stringify(G(r))}return[n,t]}class ie extends U{constructor(n){super(),T(this,n,V,D,N,{})}}export{ie as component};
